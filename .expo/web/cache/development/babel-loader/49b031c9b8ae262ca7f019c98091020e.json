{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactNativeReanimated = _interopRequireWildcard(require(\"react-native-reanimated\"));\n\nvar _useCarouselController = require(\"./hooks/useCarouselController\");\n\nvar _useAutoPlay2 = require(\"./hooks/useAutoPlay\");\n\nvar _usePropsErrorBoundary = require(\"./hooks/usePropsErrorBoundary\");\n\nvar _ScrollViewGesture = require(\"./ScrollViewGesture\");\n\nvar _useVisibleRanges = require(\"./hooks/useVisibleRanges\");\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _BaseLayout = require(\"./layouts/BaseLayout\");\n\nvar _useLayoutConfig = require(\"./hooks/useLayoutConfig\");\n\nvar _useInitProps = require(\"./hooks/useInitProps\");\n\nvar _store = require(\"./store\");\n\nvar _useCommonVariables = require(\"./hooks/useCommonVariables\");\n\nvar _useOnProgressChange = require(\"./hooks/useOnProgressChange\");\n\nvar _computedWithAutoFillData = require(\"./utils/computedWithAutoFillData\");\n\nvar _this = this,\n    _jsxFileName = \"/Users/zhaodonghao/code/github/react-native-reanimated-carousel/src/Carousel.tsx\";\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      (0, _defineProperty2.default)(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nvar Carousel = _react.default.forwardRef(function (_props, ref) {\n  var props = (0, _useInitProps.useInitProps)(_props);\n  var testID = props.testID,\n      data = props.data,\n      rawData = props.rawData,\n      loop = props.loop,\n      autoFillData = props.autoFillData,\n      mode = props.mode,\n      style = props.style,\n      width = props.width,\n      height = props.height,\n      vertical = props.vertical,\n      autoPlay = props.autoPlay,\n      windowSize = props.windowSize,\n      autoPlayReverse = props.autoPlayReverse,\n      autoPlayInterval = props.autoPlayInterval,\n      scrollAnimationDuration = props.scrollAnimationDuration,\n      withAnimation = props.withAnimation,\n      renderItem = props.renderItem,\n      onScrollEnd = props.onScrollEnd,\n      onSnapToItem = props.onSnapToItem,\n      _onScrollBegin = props.onScrollBegin,\n      onProgressChange = props.onProgressChange,\n      customAnimation = props.customAnimation,\n      defaultIndex = props.defaultIndex;\n  var commonVariables = (0, _useCommonVariables.useCommonVariables)(props);\n  var size = commonVariables.size,\n      handlerOffsetX = commonVariables.handlerOffsetX;\n  var dataLength = data.length;\n  var offsetX = (0, _reactNativeReanimated.useDerivedValue)(function () {\n    var _f = function _f() {\n      var totalSize = size * dataLength;\n      var x = handlerOffsetX.value % totalSize;\n\n      if (!loop) {\n        return handlerOffsetX.value;\n      }\n\n      return isNaN(x) ? 0 : x;\n    };\n\n    _f._closure = {\n      size: size,\n      dataLength: dataLength,\n      handlerOffsetX: handlerOffsetX,\n      loop: loop\n    };\n    _f.asString = \"function _f(){const{size,dataLength,handlerOffsetX,loop}=jsThis._closure;{const totalSize=size*dataLength;const x=handlerOffsetX.value%totalSize;if(!loop){return handlerOffsetX.value;}return isNaN(x)?0:x;}}\";\n    _f.__workletHash = 17456063948631;\n    _f.__location = \"/Users/zhaodonghao/code/github/react-native-reanimated-carousel/src/Carousel.tsx (54:40)\";\n\n    global.__reanimatedWorkletInit(_f);\n\n    return _f;\n  }(), [loop, size, dataLength]);\n  (0, _usePropsErrorBoundary.usePropsErrorBoundary)(props);\n  (0, _useOnProgressChange.useOnProgressChange)({\n    autoFillData: autoFillData,\n    loop: loop,\n    size: size,\n    offsetX: offsetX,\n    rawData: rawData,\n    onProgressChange: onProgressChange\n  });\n  var carouselController = (0, _useCarouselController.useCarouselController)({\n    loop: loop,\n    size: size,\n    data: data,\n    autoFillData: autoFillData,\n    handlerOffsetX: handlerOffsetX,\n    withAnimation: withAnimation,\n    defaultIndex: defaultIndex,\n    onScrollEnd: function onScrollEnd() {\n      return (0, _reactNativeReanimated.runOnJS)(_onScrollEnd)();\n    },\n    onScrollBegin: function onScrollBegin() {\n      return !!_onScrollBegin && (0, _reactNativeReanimated.runOnJS)(_onScrollBegin)();\n    },\n    duration: scrollAnimationDuration\n  });\n  var next = carouselController.next,\n      prev = carouselController.prev,\n      scrollTo = carouselController.scrollTo,\n      getSharedIndex = carouselController.getSharedIndex,\n      getCurrentIndex = carouselController.getCurrentIndex;\n\n  var _useAutoPlay = (0, _useAutoPlay2.useAutoPlay)({\n    autoPlay: autoPlay,\n    autoPlayInterval: autoPlayInterval,\n    autoPlayReverse: autoPlayReverse,\n    carouselController: carouselController\n  }),\n      startAutoPlay = _useAutoPlay.start,\n      pauseAutoPlay = _useAutoPlay.pause;\n\n  var _onScrollEnd = _react.default.useCallback(function () {\n    var _sharedIndex = Math.round(getSharedIndex());\n\n    var realIndex = (0, _computedWithAutoFillData.computedRealIndexWithAutoFillData)({\n      index: _sharedIndex,\n      dataLength: rawData.length,\n      loop: loop,\n      autoFillData: autoFillData\n    });\n\n    if (onSnapToItem) {\n      onSnapToItem(realIndex);\n    }\n\n    if (onScrollEnd) {\n      onScrollEnd(realIndex);\n    }\n  }, [loop, autoFillData, rawData.length, getSharedIndex, onSnapToItem, onScrollEnd]);\n\n  var scrollViewGestureOnScrollBegin = _react.default.useCallback(function () {\n    pauseAutoPlay();\n    _onScrollBegin == null ? void 0 : _onScrollBegin();\n  }, [_onScrollBegin, pauseAutoPlay]);\n\n  var scrollViewGestureOnScrollEnd = _react.default.useCallback(function () {\n    startAutoPlay();\n\n    _onScrollEnd();\n  }, [_onScrollEnd, startAutoPlay]);\n\n  var scrollViewGestureOnTouchBegin = _react.default.useCallback(pauseAutoPlay, [pauseAutoPlay]);\n\n  var scrollViewGestureOnTouchEnd = _react.default.useCallback(startAutoPlay, [startAutoPlay]);\n\n  _react.default.useImperativeHandle(ref, function () {\n    return {\n      next: next,\n      prev: prev,\n      getCurrentIndex: getCurrentIndex,\n      scrollTo: scrollTo\n    };\n  }, [getCurrentIndex, next, prev, scrollTo]);\n\n  var visibleRanges = (0, _useVisibleRanges.useVisibleRanges)({\n    total: data.length,\n    viewSize: size,\n    translation: handlerOffsetX,\n    windowSize: windowSize\n  });\n  var layoutConfig = (0, _useLayoutConfig.useLayoutConfig)(_objectSpread(_objectSpread({}, props), {}, {\n    size: size\n  }));\n\n  var renderLayout = _react.default.useCallback(function (item, i) {\n    var realIndex = (0, _computedWithAutoFillData.computedRealIndexWithAutoFillData)({\n      index: i,\n      dataLength: rawData.length,\n      loop: loop,\n      autoFillData: autoFillData\n    });\n    return _react.default.createElement(_BaseLayout.BaseLayout, {\n      key: i,\n      index: i,\n      handlerOffsetX: offsetX,\n      visibleRanges: visibleRanges,\n      animationStyle: customAnimation || layoutConfig,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }, function (_ref) {\n      var animationValue = _ref.animationValue;\n      return renderItem({\n        item: item,\n        index: realIndex,\n        animationValue: animationValue\n      });\n    });\n  }, [loop, rawData, offsetX, visibleRanges, autoFillData, renderItem, layoutConfig, customAnimation]);\n\n  return _react.default.createElement(_store.CTX.Provider, {\n    value: {\n      props: props,\n      common: commonVariables\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: [styles.container, {\n      width: width || '100%',\n      height: height || '100%'\n    }, style],\n    testID: testID,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, _react.default.createElement(_ScrollViewGesture.ScrollViewGesture, {\n    size: size,\n    translation: handlerOffsetX,\n    onScrollBegin: scrollViewGestureOnScrollBegin,\n    onScrollEnd: scrollViewGestureOnScrollEnd,\n    onTouchBegin: scrollViewGestureOnTouchBegin,\n    onTouchEnd: scrollViewGestureOnTouchEnd,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 21\n    }\n  }, _react.default.createElement(_reactNativeReanimated.default.View, {\n    key: mode,\n    style: [styles.container, {\n      width: width || '100%',\n      height: height || '100%'\n    }, style, vertical ? styles.itemsVertical : styles.itemsHorizontal],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 25\n    }\n  }, data.map(renderLayout)))));\n});\n\nvar _default = Carousel;\nexports.default = _default;\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    overflow: 'hidden'\n  },\n  itemsHorizontal: {\n    flexDirection: 'row'\n  },\n  itemsVertical: {\n    flexDirection: 'column'\n  }\n});","map":{"version":3,"sources":["Carousel.tsx"],"names":["size","dataLength","loop","handlerOffsetX","Carousel","React","props","testID","data","rawData","autoFillData","mode","style","width","height","vertical","autoPlay","windowSize","autoPlayReverse","autoPlayInterval","scrollAnimationDuration","withAnimation","renderItem","onScrollEnd","onSnapToItem","onScrollBegin","onProgressChange","customAnimation","defaultIndex","commonVariables","offsetX","totalSize","x","isNaN","carouselController","duration","next","prev","scrollTo","getSharedIndex","getCurrentIndex","startAutoPlay","pauseAutoPlay","_onScrollEnd","_sharedIndex","Math","realIndex","index","scrollViewGestureOnScrollBegin","scrollViewGestureOnScrollEnd","scrollViewGestureOnTouchBegin","scrollViewGestureOnTouchEnd","visibleRanges","total","viewSize","translation","layoutConfig","renderLayout","animationValue","item","common","styles","StyleSheet","container","overflow","itemsHorizontal","flexDirection","itemsVertical"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Animated, { runOnJS, useDerivedValue } from 'react-native-reanimated';\n\nimport { useCarouselController } from './hooks/useCarouselController';\nimport { useAutoPlay } from './hooks/useAutoPlay';\nimport { usePropsErrorBoundary } from './hooks/usePropsErrorBoundary';\nimport { ScrollViewGesture } from './ScrollViewGesture';\nimport { useVisibleRanges } from './hooks/useVisibleRanges';\n\nimport type { ICarouselInstance, TCarouselProps } from './types';\nimport { StyleSheet, View } from 'react-native';\nimport { BaseLayout } from './layouts/BaseLayout';\nimport { useLayoutConfig } from './hooks/useLayoutConfig';\nimport { useInitProps } from './hooks/useInitProps';\nimport { CTX } from './store';\nimport { useCommonVariables } from './hooks/useCommonVariables';\nimport { useOnProgressChange } from './hooks/useOnProgressChange';\nimport { computedRealIndexWithAutoFillData } from './utils/computedWithAutoFillData';\n\nconst Carousel = React.forwardRef<ICarouselInstance, TCarouselProps<any>>(\n    (_props, ref) => {\n        const props = useInitProps(_props);\n\n        const {\n            testID,\n            data,\n            rawData,\n            loop,\n            autoFillData,\n            mode,\n            style,\n            width,\n            height,\n            vertical,\n            autoPlay,\n            windowSize,\n            autoPlayReverse,\n            autoPlayInterval,\n            scrollAnimationDuration,\n            withAnimation,\n            renderItem,\n            onScrollEnd,\n            onSnapToItem,\n            onScrollBegin,\n            onProgressChange,\n            customAnimation,\n            defaultIndex,\n        } = props;\n\n        const commonVariables = useCommonVariables(props);\n        const { size, handlerOffsetX } = commonVariables;\n        const dataLength = data.length;\n\n        const offsetX = useDerivedValue(() => {\n            const totalSize = size * dataLength;\n            const x = handlerOffsetX.value % totalSize;\n\n            if (!loop) {\n                return handlerOffsetX.value;\n            }\n            return isNaN(x) ? 0 : x;\n        }, [loop, size, dataLength]);\n\n        usePropsErrorBoundary(props);\n        useOnProgressChange({\n            autoFillData,\n            loop,\n            size,\n            offsetX,\n            rawData,\n            onProgressChange,\n        });\n\n        const carouselController = useCarouselController({\n            loop,\n            size,\n            data,\n            autoFillData,\n            handlerOffsetX,\n            withAnimation,\n            defaultIndex,\n            onScrollEnd: () => runOnJS(_onScrollEnd)(),\n            onScrollBegin: () => !!onScrollBegin && runOnJS(onScrollBegin)(),\n            duration: scrollAnimationDuration,\n        });\n\n        const { next, prev, scrollTo, getSharedIndex, getCurrentIndex } =\n            carouselController;\n\n        const { start: startAutoPlay, pause: pauseAutoPlay } = useAutoPlay({\n            autoPlay,\n            autoPlayInterval,\n            autoPlayReverse,\n            carouselController,\n        });\n\n        const _onScrollEnd = React.useCallback(() => {\n            const _sharedIndex = Math.round(getSharedIndex());\n\n            const realIndex = computedRealIndexWithAutoFillData({\n                index: _sharedIndex,\n                dataLength: rawData.length,\n                loop,\n                autoFillData,\n            });\n\n            if (onSnapToItem) {\n                onSnapToItem(realIndex);\n            }\n            if (onScrollEnd) {\n                onScrollEnd(realIndex);\n            }\n        }, [\n            loop,\n            autoFillData,\n            rawData.length,\n            getSharedIndex,\n            onSnapToItem,\n            onScrollEnd,\n        ]);\n\n        const scrollViewGestureOnScrollBegin = React.useCallback(() => {\n            pauseAutoPlay();\n            onScrollBegin?.();\n        }, [onScrollBegin, pauseAutoPlay]);\n\n        const scrollViewGestureOnScrollEnd = React.useCallback(() => {\n            startAutoPlay();\n            _onScrollEnd();\n        }, [_onScrollEnd, startAutoPlay]);\n\n        const scrollViewGestureOnTouchBegin = React.useCallback(pauseAutoPlay, [\n            pauseAutoPlay,\n        ]);\n\n        const scrollViewGestureOnTouchEnd = React.useCallback(startAutoPlay, [\n            startAutoPlay,\n        ]);\n\n        React.useImperativeHandle(\n            ref,\n            () => ({\n                next,\n                prev,\n                getCurrentIndex,\n                scrollTo,\n            }),\n            [getCurrentIndex, next, prev, scrollTo]\n        );\n\n        const visibleRanges = useVisibleRanges({\n            total: data.length,\n            viewSize: size,\n            translation: handlerOffsetX,\n            windowSize,\n        });\n\n        const layoutConfig = useLayoutConfig({ ...props, size });\n\n        const renderLayout = React.useCallback(\n            (item: any, i: number) => {\n                const realIndex = computedRealIndexWithAutoFillData({\n                    index: i,\n                    dataLength: rawData.length,\n                    loop,\n                    autoFillData,\n                });\n\n                return (\n                    <BaseLayout\n                        key={i}\n                        index={i}\n                        handlerOffsetX={offsetX}\n                        visibleRanges={visibleRanges}\n                        animationStyle={customAnimation || layoutConfig}\n                    >\n                        {({ animationValue }) =>\n                            renderItem({\n                                item,\n                                index: realIndex,\n                                animationValue,\n                            })\n                        }\n                    </BaseLayout>\n                );\n            },\n            [\n                loop,\n                rawData,\n                offsetX,\n                visibleRanges,\n                autoFillData,\n                renderItem,\n                layoutConfig,\n                customAnimation,\n            ]\n        );\n\n        return (\n            <CTX.Provider value={{ props, common: commonVariables }}>\n                <View\n                    style={[\n                        styles.container,\n                        { width: width || '100%', height: height || '100%' },\n                        style,\n                    ]}\n                    testID={testID}\n                >\n                    <ScrollViewGesture\n                        size={size}\n                        translation={handlerOffsetX}\n                        onScrollBegin={scrollViewGestureOnScrollBegin}\n                        onScrollEnd={scrollViewGestureOnScrollEnd}\n                        onTouchBegin={scrollViewGestureOnTouchBegin}\n                        onTouchEnd={scrollViewGestureOnTouchEnd}\n                    >\n                        <Animated.View\n                            key={mode}\n                            style={[\n                                styles.container,\n                                {\n                                    width: width || '100%',\n                                    height: height || '100%',\n                                },\n                                style,\n                                vertical\n                                    ? styles.itemsVertical\n                                    : styles.itemsHorizontal,\n                            ]}\n                        >\n                            {data.map(renderLayout)}\n                        </Animated.View>\n                    </ScrollViewGesture>\n                </View>\n            </CTX.Provider>\n        );\n    }\n);\n\nexport default Carousel as <T extends any>(\n    props: React.PropsWithChildren<TCarouselProps<T>>\n) => React.ReactElement;\n\nconst styles = StyleSheet.create({\n    container: {\n        overflow: 'hidden',\n    },\n    itemsHorizontal: {\n        flexDirection: 'row',\n    },\n    itemsVertical: {\n        flexDirection: 'column',\n    },\n});\n"]},"metadata":{},"sourceType":"script"}