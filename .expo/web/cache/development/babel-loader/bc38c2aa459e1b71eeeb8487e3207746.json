{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useAutoPlay = useAutoPlay;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") {\n    return {\n      default: obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction useAutoPlay(opts) {\n  var _opts$autoPlay = opts.autoPlay,\n      autoPlay = _opts$autoPlay === void 0 ? false : _opts$autoPlay,\n      _opts$autoPlayReverse = opts.autoPlayReverse,\n      autoPlayReverse = _opts$autoPlayReverse === void 0 ? false : _opts$autoPlayReverse,\n      autoPlayInterval = opts.autoPlayInterval,\n      carouselController = opts.carouselController;\n  var prev = carouselController.prev,\n      next = carouselController.next;\n  var timer = React.useRef();\n  var stopped = React.useRef(!autoPlay);\n  var play = React.useCallback(function () {\n    if (stopped.current) {\n      return;\n    }\n\n    timer.current && clearTimeout(timer.current);\n    timer.current = setTimeout(function () {\n      autoPlayReverse ? prev({\n        onFinished: play\n      }) : next({\n        onFinished: play\n      });\n    }, autoPlayInterval);\n  }, [autoPlayReverse, autoPlayInterval, prev, next]);\n  var pause = React.useCallback(function () {\n    if (!autoPlay) {\n      return;\n    }\n\n    timer.current && clearTimeout(timer.current);\n    stopped.current = true;\n  }, [autoPlay]);\n  var start = React.useCallback(function () {\n    if (!autoPlay) {\n      return;\n    }\n\n    stopped.current = false;\n    play();\n  }, [play, autoPlay]);\n  React.useEffect(function () {\n    if (autoPlay) {\n      start();\n    } else {\n      pause();\n    }\n\n    return pause;\n  }, [pause, start, autoPlay]);\n  return {\n    pause: pause,\n    start: start\n  };\n}","map":{"version":3,"sources":["useAutoPlay.ts"],"names":["autoPlay","autoPlayReverse","autoPlayInterval","carouselController","opts","prev","next","timer","React","stopped","play","clearTimeout","setTimeout","onFinished","pause","start"],"mappings":";;;;;AAAA,IAAA,KAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGO;;AAAA,SAAA,WAAA,CAAA,IAAA,EAKJ;AACC,MAAA,cAAA,GAKII,IALJ,CAAA,QAAA;AAAA,MACIJ,QADJ,GAAA,cAAA,KAAA,KAAA,CAAA,GAAA,KAAA,GAAA,cAAA;AAAA,MAAA,qBAAA,GAKII,IALJ,CAAA,eAAA;AAAA,MAEIH,eAFJ,GAAA,qBAAA,KAAA,KAAA,CAAA,GAAA,KAAA,GAAA,qBAAA;AAAA,MAGIC,gBAHJ,GAKIE,IALJ,CAAA,gBAAA;AAAA,MAIID,kBAJJ,GAKIC,IALJ,CAAA,kBAAA;AAOA,MAAQC,IAAR,GAAuBF,kBAAvB,CAAA,IAAA;AAAA,MAAcG,IAAd,GAAuBH,kBAAvB,CAAA,IAAA;AACA,MAAMI,KAAK,GAAGC,KAAK,CAAnB,MAAcA,EAAd;AACA,MAAMC,OAAO,GAAGD,KAAK,CAALA,MAAAA,CAAsB,CAAtC,QAAgBA,CAAhB;AAEA,MAAME,IAAI,GAAGF,KAAK,CAALA,WAAAA,CAAkB,YAAM;AACjC,QAAIC,OAAO,CAAX,OAAA,EAAqB;AACjB;AAGJF;;AAAAA,IAAAA,KAAK,CAALA,OAAAA,IAAiBI,YAAY,CAACJ,KAAK,CAAnCA,OAA6B,CAA7BA;AACAA,IAAAA,KAAK,CAALA,OAAAA,GAAgBK,UAAU,CAAC,YAAM;AAC7BX,MAAAA,eAAe,GACTI,IAAI,CAAC;AAAEQ,QAAAA,UAAU,EADR;AACJ,OAAD,CADK,GAETP,IAAI,CAAC;AAAEO,QAAAA,UAAU,EAFvBZ;AAEW,OAAD,CAFVA;AADsB,KAAA,EAA1BM,gBAA0B,CAA1BA;AANSC,GAAAA,EAWV,CAAA,eAAA,EAAA,gBAAA,EAAA,IAAA,EAXH,IAWG,CAXUA,CAAb;AAaA,MAAMM,KAAK,GAAGN,KAAK,CAALA,WAAAA,CAAkB,YAAM;AAClC,QAAI,CAAJ,QAAA,EAAe;AACX;AAEJD;;AAAAA,IAAAA,KAAK,CAALA,OAAAA,IAAiBI,YAAY,CAACJ,KAAK,CAAnCA,OAA6B,CAA7BA;AACAE,IAAAA,OAAO,CAAPA,OAAAA,GAAAA,IAAAA;AALUD,GAAAA,EAMX,CANH,QAMG,CANWA,CAAd;AAQA,MAAMO,KAAK,GAAGP,KAAK,CAALA,WAAAA,CAAkB,YAAM;AAClC,QAAI,CAAJ,QAAA,EAAe;AACX;AAEJC;;AAAAA,IAAAA,OAAO,CAAPA,OAAAA,GAAAA,KAAAA;AACAC,IAAAA,IAAI;AALMF,GAAAA,EAMX,CAAA,IAAA,EANH,QAMG,CANWA,CAAd;AAQAA,EAAAA,KAAK,CAALA,SAAAA,CAAgB,YAAM;AAClB,QAAA,QAAA,EAAc;AACVO,MAAAA,KAAK;AADT,KAAA,MAEO;AACHD,MAAAA,KAAK;AAET;;AAAA,WAAA,KAAA;AANJN,GAAAA,EAOG,CAAA,KAAA,EAAA,KAAA,EAPHA,QAOG,CAPHA;AASA,SAAO;AACHM,IAAAA,KAAK,EADF,KAAA;AAEHC,IAAAA,KAAK,EAFT;AAAO,GAAP;AAIH","sourcesContent":["import * as React from 'react';\nimport type { ICarouselController } from './useCarouselController';\n\nexport function useAutoPlay(opts: {\n    autoPlay?: boolean;\n    autoPlayInterval?: number;\n    autoPlayReverse?: boolean;\n    carouselController: ICarouselController;\n}) {\n    const {\n        autoPlay = false,\n        autoPlayReverse = false,\n        autoPlayInterval,\n        carouselController,\n    } = opts;\n\n    const { prev, next } = carouselController;\n    const timer = React.useRef<NodeJS.Timer>();\n    const stopped = React.useRef<boolean>(!autoPlay);\n\n    const play = React.useCallback(() => {\n        if (stopped.current) {\n            return;\n        }\n\n        timer.current && clearTimeout(timer.current);\n        timer.current = setTimeout(() => {\n            autoPlayReverse\n                ? prev({ onFinished: play })\n                : next({ onFinished: play });\n        }, autoPlayInterval);\n    }, [autoPlayReverse, autoPlayInterval, prev, next]);\n\n    const pause = React.useCallback(() => {\n        if (!autoPlay) {\n            return;\n        }\n        timer.current && clearTimeout(timer.current);\n        stopped.current = true;\n    }, [autoPlay]);\n\n    const start = React.useCallback(() => {\n        if (!autoPlay) {\n            return;\n        }\n        stopped.current = false;\n        play();\n    }, [play, autoPlay]);\n\n    React.useEffect(() => {\n        if (autoPlay) {\n            start();\n        } else {\n            pause();\n        }\n        return pause;\n    }, [pause, start, autoPlay]);\n\n    return {\n        pause,\n        start,\n    };\n}\n"]},"metadata":{},"sourceType":"script"}