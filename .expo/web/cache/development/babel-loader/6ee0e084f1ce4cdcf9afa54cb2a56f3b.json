{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { useState, useEffect, useReducer, useCallback, useMemo, React } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport useWindowDimensions from \"react-native-web/dist/exports/useWindowDimensions\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport useFonts from 'expo-font';\nimport * as SplashScreen from 'expo-splash-screen';\nimport { AuthContext } from \"./src/components/context\";\nimport DrawerNavigator from \"./src/navigation/DrawerNavigator\";\nimport WelcomeStackNavigator from \"./src/navigation/WelcomeStackNavigator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default function App() {\n  var _useWindowDimensions = useWindowDimensions(),\n      width = _useWindowDimensions.width,\n      height = _useWindowDimensions.height;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      userToken = _useState2[0],\n      setUserToken = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      appIsReady = _useState4[0],\n      setAppIsReady = _useState4[1];\n\n  var initialLoginState = {\n    isLoading: true,\n    username: null,\n    userToken: null\n  };\n\n  var loginReducer = function loginReducer(previousState, action) {\n    switch (action.type) {\n      case 'RETRIEVE_TOKEN':\n        return _objectSpread(_objectSpread({}, previousState), {}, {\n          userToken: action.token,\n          isLoading: false\n        });\n\n      case 'LOGIN':\n        return _objectSpread(_objectSpread({}, previousState), {}, {\n          username: action.id,\n          userToken: action.token,\n          isLoading: false\n        });\n\n      case 'LOGOUT':\n        return _objectSpread(_objectSpread({}, previousState), {}, {\n          username: null,\n          userToken: null,\n          isLoading: false\n        });\n\n      case 'REGISTER':\n        return _objectSpread(_objectSpread({}, previousState), {}, {\n          username: action.id,\n          userToken: action.token,\n          isLoading: false\n        });\n    }\n  };\n\n  var _useReducer = useReducer(loginReducer, initialLoginState),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      loginState = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  var authContext = useMemo(function () {\n    return {\n      signIn: function signIn(username, password) {\n        var userToken;\n        return _regeneratorRuntime.async(function signIn$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                userToken = null;\n                console.log('username: ', username);\n                console.log('password: ', password);\n\n                if (!(username == 'U' && password == 'P')) {\n                  _context.next = 13;\n                  break;\n                }\n\n                _context.prev = 4;\n                userToken = 'qwer';\n                _context.next = 8;\n                return _regeneratorRuntime.awrap(AsyncStorage.setItem('userToken', userToken));\n\n              case 8:\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](4);\n                console.log(_context.t0);\n\n              case 13:\n                console.log('token: ', userToken);\n                dispatch({\n                  type: 'LOGIN',\n                  id: username,\n                  token: userToken\n                });\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, [[4, 10]], Promise);\n      },\n      signOut: function signOut() {\n        return _regeneratorRuntime.async(function signOut$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return _regeneratorRuntime.awrap(AsyncStorage.removeItem('userToken'));\n\n              case 3:\n                _context2.next = 8;\n                break;\n\n              case 5:\n                _context2.prev = 5;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n\n              case 8:\n                dispatch({\n                  type: 'LOGOUT'\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, [[0, 5]], Promise);\n      },\n      signUp: function signUp() {\n        setUserToken('asdf');\n        setIsLoading(false);\n      }\n    };\n  });\n  useEffect(function () {\n    setTimeout(function _callee() {\n      var userToken;\n      return _regeneratorRuntime.async(function _callee$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              userToken = null;\n              _context3.prev = 1;\n              _context3.next = 4;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('userToken'));\n\n            case 4:\n              userToken = _context3.sent;\n              _context3.next = 10;\n              break;\n\n            case 7:\n              _context3.prev = 7;\n              _context3.t0 = _context3[\"catch\"](1);\n              console.log(_context3.t0);\n\n            case 10:\n              console.log('token after reopen app: ', userToken);\n              dispatch({\n                type: 'REGISTER',\n                token: userToken\n              });\n\n            case 12:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, [[1, 7]], Promise);\n    }, 1000);\n  }, []);\n  return _jsx(AuthContext.Provider, {\n    value: authContext,\n    children: loginState.userToken != null ? _jsx(DrawerNavigator, {}) : _jsx(WelcomeStackNavigator, {})\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    alignContent: 'center',\n    justifyContent: 'center'\n  },\n  ellipse: {},\n  text: {\n    fontSize: 20,\n    textAlign: 'center'\n  }\n});","map":{"version":3,"names":["useState","useEffect","useReducer","useCallback","useMemo","React","AsyncStorage","useFonts","SplashScreen","AuthContext","DrawerNavigator","WelcomeStackNavigator","App","useWindowDimensions","width","height","userToken","setUserToken","appIsReady","setAppIsReady","initialLoginState","isLoading","username","loginReducer","previousState","action","type","token","id","loginState","dispatch","authContext","signIn","password","console","log","setItem","signOut","removeItem","signUp","setIsLoading","setTimeout","getItem","styles","StyleSheet","create","container","alignContent","justifyContent","ellipse","text","fontSize","textAlign"],"sources":["/home/bruh/Desktop/react-native-app/COVID19-Helper/App.js"],"sourcesContent":["import { useState, useEffect, useReducer, useCallback, useMemo, React, } from 'react';\nimport { View, ActivityIndicator, BackHandler, Text, StyleSheet, useWindowDimensions, } from \"react-native\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport useFonts from 'expo-font';\n\nimport * as SplashScreen from 'expo-splash-screen';\n\nimport { AuthContext } from './src/components/context';\nimport DrawerNavigator from './src/navigation/DrawerNavigator';\nimport WelcomeStackNavigator from './src/navigation/WelcomeStackNavigator';\n\nexport default function App() {\n\n\n  const { width, height } = useWindowDimensions();\n\n  const [userToken, setUserToken] = useState(null);\n  const [appIsReady, setAppIsReady] = useState(false);\n\n  const initialLoginState = {\n    isLoading: true,\n    username: null,\n    userToken: null,\n  };\n\n  const loginReducer = (previousState, action) => {\n    switch(action.type) {\n      case 'RETRIEVE_TOKEN':\n        return {\n          ...previousState,\n          userToken: action.token,\n          isLoading: false,\n        };\n      case 'LOGIN':\n        return {\n          ...previousState,\n          username: action.id,\n          userToken: action.token,\n          isLoading: false,\n        };\n      case 'LOGOUT':\n        return {\n          ...previousState,\n          username: null,\n          userToken: null,\n          isLoading: false,\n        };\n      case 'REGISTER':\n        return {\n          ...previousState,\n          username: action.id,\n          userToken: action.token,\n          isLoading: false,\n        };\n    }\n  };\n  const [loginState, dispatch] = useReducer(loginReducer, initialLoginState);\n\n  const authContext = useMemo(() => ({\n    signIn: async(username, password) => {\n      let userToken;\n      userToken = null;\n      console.log('username: ', username);\n      console.log('password: ', password);\n      if(username == 'U' && password == 'P') {\n        try {\n          userToken = 'qwer';\n          await AsyncStorage.setItem('userToken', userToken)\n        } catch(e) {\n          console.log(e);\n        }\n      }\n      console.log('token: ', userToken);\n      dispatch({ type: 'LOGIN', id: username, token: userToken });\n    },\n    signOut: async() => {\n      try {\n        await AsyncStorage.removeItem('userToken');\n      } catch(e) {\n        console.log(e);\n      }\n      dispatch({ type: 'LOGOUT' });\n    },\n    signUp: () => {\n      setUserToken('asdf');\n      setIsLoading(false);\n    }\n  }));\n\n  useEffect(() => {\n    setTimeout(async() => {\n      let userToken;\n      userToken = null;\n      try {\n        userToken = await AsyncStorage.getItem('userToken');\n      } catch(e) {\n        console.log(e);\n      }\n      console.log('token after reopen app: ', userToken);\n      dispatch({ type: 'REGISTER', token: userToken });\n    }, 1000);\n  }, []);\n\n  \n\n  // useEffect(() => {\n  //   async function prepare() {\n  //     try {\n  //       await fontsLoading;\n  //       await SplashScreen.preventAutoHideAsync();\n  //     } catch (e) {\n  //       console.warn(e);\n  //     } finally {\n  //       setAppIsReady(true);\n  //     }\n  //   }\n\n  //   prepare();\n  // }, []);\n\n  // const onLayoutRootView = useCallback(async () => {\n  //   if (appIsReady) {\n  //     await SplashScreen.hideAsync();\n  //   }\n  // }, [appIsReady]);\n\n  // if (!appIsReady) {\n  //   return null;\n  // }\n\n//   <View style={styles.container}>\n//     <LinearGradient\n//       // Background Linear Gradient\n//       colors={['#B2FEFA', '#0ED2F7']}\n//       style={[styles.background, { width, height, marginTop: getStatusBarHeight() },]}\n//     />\n// </View>\n\n  return (\n    <AuthContext.Provider value={authContext}>\n      { loginState.userToken != null ? (\n        <DrawerNavigator />\n      )\n      :\n        <WelcomeStackNavigator />\n      }\n    </AuthContext.Provider>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    alignContent: 'center',\n    justifyContent: 'center',\n  },\n  ellipse: {\n\n  },\n  text: {\n    // fontFamily: 'ms-regular',\n    fontSize: 20,\n    textAlign: 'center'\n  }\n})"],"mappings":";;;;;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,UAA9B,EAA0CC,WAA1C,EAAuDC,OAAvD,EAAgEC,KAAhE,QAA8E,OAA9E;;;;;;;AAEA,OAAOC,YAAP,MAAyB,2CAAzB;AACA,OAAOC,QAAP,MAAqB,WAArB;AAEA,OAAO,KAAKC,YAAZ,MAA8B,oBAA9B;AAEA,SAASC,WAAT;AACA,OAAOC,eAAP;AACA,OAAOC,qBAAP;;AAEA,eAAe,SAASC,GAAT,GAAe;EAG5B,2BAA0BC,mBAAmB,EAA7C;EAAA,IAAQC,KAAR,wBAAQA,KAAR;EAAA,IAAeC,MAAf,wBAAeA,MAAf;;EAEA,gBAAkCf,QAAQ,CAAC,IAAD,CAA1C;EAAA;EAAA,IAAOgB,SAAP;EAAA,IAAkBC,YAAlB;;EACA,iBAAoCjB,QAAQ,CAAC,KAAD,CAA5C;EAAA;EAAA,IAAOkB,UAAP;EAAA,IAAmBC,aAAnB;;EAEA,IAAMC,iBAAiB,GAAG;IACxBC,SAAS,EAAE,IADa;IAExBC,QAAQ,EAAE,IAFc;IAGxBN,SAAS,EAAE;EAHa,CAA1B;;EAMA,IAAMO,YAAY,GAAG,SAAfA,YAAe,CAACC,aAAD,EAAgBC,MAAhB,EAA2B;IAC9C,QAAOA,MAAM,CAACC,IAAd;MACE,KAAK,gBAAL;QACE,uCACKF,aADL;UAEER,SAAS,EAAES,MAAM,CAACE,KAFpB;UAGEN,SAAS,EAAE;QAHb;;MAKF,KAAK,OAAL;QACE,uCACKG,aADL;UAEEF,QAAQ,EAAEG,MAAM,CAACG,EAFnB;UAGEZ,SAAS,EAAES,MAAM,CAACE,KAHpB;UAIEN,SAAS,EAAE;QAJb;;MAMF,KAAK,QAAL;QACE,uCACKG,aADL;UAEEF,QAAQ,EAAE,IAFZ;UAGEN,SAAS,EAAE,IAHb;UAIEK,SAAS,EAAE;QAJb;;MAMF,KAAK,UAAL;QACE,uCACKG,aADL;UAEEF,QAAQ,EAAEG,MAAM,CAACG,EAFnB;UAGEZ,SAAS,EAAES,MAAM,CAACE,KAHpB;UAIEN,SAAS,EAAE;QAJb;IAtBJ;EA6BD,CA9BD;;EA+BA,kBAA+BnB,UAAU,CAACqB,YAAD,EAAeH,iBAAf,CAAzC;EAAA;EAAA,IAAOS,UAAP;EAAA,IAAmBC,QAAnB;;EAEA,IAAMC,WAAW,GAAG3B,OAAO,CAAC;IAAA,OAAO;MACjC4B,MAAM,EAAE,gBAAMV,QAAN,EAAgBW,QAAhB;QAAA;QAAA;UAAA;YAAA;cAAA;gBAENjB,SAAS,GAAG,IAAZ;gBACAkB,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0Bb,QAA1B;gBACAY,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BF,QAA1B;;gBAJM,MAKHX,QAAQ,IAAI,GAAZ,IAAmBW,QAAQ,IAAI,GAL5B;kBAAA;kBAAA;gBAAA;;gBAAA;gBAOFjB,SAAS,GAAG,MAAZ;gBAPE;gBAAA,iCAQIV,YAAY,CAAC8B,OAAb,CAAqB,WAArB,EAAkCpB,SAAlC,CARJ;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;gBAUFkB,OAAO,CAACC,GAAR;;cAVE;gBAaND,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBnB,SAAvB;gBACAc,QAAQ,CAAC;kBAAEJ,IAAI,EAAE,OAAR;kBAAiBE,EAAE,EAAEN,QAArB;kBAA+BK,KAAK,EAAEX;gBAAtC,CAAD,CAAR;;cAdM;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CADyB;MAiBjCqB,OAAO,EAAE;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;gBAAA,iCAEC/B,YAAY,CAACgC,UAAb,CAAwB,WAAxB,CAFD;;cAAA;gBAAA;gBAAA;;cAAA;gBAAA;gBAAA;gBAILJ,OAAO,CAACC,GAAR;;cAJK;gBAMPL,QAAQ,CAAC;kBAAEJ,IAAI,EAAE;gBAAR,CAAD,CAAR;;cANO;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CAjBwB;MAyBjCa,MAAM,EAAE,kBAAM;QACZtB,YAAY,CAAC,MAAD,CAAZ;QACAuB,YAAY,CAAC,KAAD,CAAZ;MACD;IA5BgC,CAAP;EAAA,CAAD,CAA3B;EA+BAvC,SAAS,CAAC,YAAM;IACdwC,UAAU,CAAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAETzB,SAAS,GAAG,IAAZ;cAFS;cAAA;cAAA,iCAIWV,YAAY,CAACoC,OAAb,CAAqB,WAArB,CAJX;;YAAA;cAIP1B,SAJO;cAAA;cAAA;;YAAA;cAAA;cAAA;cAMPkB,OAAO,CAACC,GAAR;;YANO;cAQTD,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCnB,SAAxC;cACAc,QAAQ,CAAC;gBAAEJ,IAAI,EAAE,UAAR;gBAAoBC,KAAK,EAAEX;cAA3B,CAAD,CAAR;;YATS;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CAAD,EAUP,IAVO,CAAV;EAWD,CAZQ,EAYN,EAZM,CAAT;EAiDA,OACE,KAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEe,WAA7B;IAAA,UACIF,UAAU,CAACb,SAAX,IAAwB,IAAxB,GACA,KAAC,eAAD,KADA,GAIA,KAAC,qBAAD;EALJ,EADF;AAUD;AAED,IAAM2B,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;EAC/BC,SAAS,EAAE;IACTC,YAAY,EAAE,QADL;IAETC,cAAc,EAAE;EAFP,CADoB;EAK/BC,OAAO,EAAE,EALsB;EAQ/BC,IAAI,EAAE;IAEJC,QAAQ,EAAE,EAFN;IAGJC,SAAS,EAAE;EAHP;AARyB,CAAlB,CAAf"},"metadata":{},"sourceType":"module"}